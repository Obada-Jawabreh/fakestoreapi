<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stylish E-Commerce Website</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <h1>My E-Commerce Store</h1>
            <nav>
                <ul>
                    <li><a href="#">Home</a></li>
                    <li><a href="#">Shop</a></li>
                    <li><a href="#">About</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container">
         <section class="products">
            <h2>Our Products</h2>

            <div id="product-grid">

            </div>
        </section>
    </main>
<main class="main">
    <form id="post-form">
        <input type="text" id="title" placeholder="Title" required>
        <input type="text" id="price" placeholder="Price" required>
        <textarea id="description" placeholder="Description" required></textarea>
        <input type="url" id="image" placeholder="Image URL" required>
        <button type="submit">Create Post</button>
    </form>
    <div id="products-container"></div>
</main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p>&copy; 2024 My E-Commerce Store. All rights reserved.</p>
        </div>
    </footer>
    <script src="app.js"></script>
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getDatabase, ref, push, onChildAdded, update, remove } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";
        
        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBj8BZ-Sc2Yue7Z7_FkOOdt5aCg4apmqrg",
            authDomain: "test-debaf.firebaseapp.com",
            databaseURL: "https://test-debaf-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "test-debaf",
            storageBucket: "test-debaf.appspot.com",
            messagingSenderId: "807499809995",
            appId: "1:807499809995:web:1cbf6a30da110dabee074e",
            measurementId: "G-FWCFVB8PDW"
        };
        
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        class Product {
            constructor(title, price, description, image) {
                this.title = title;
                this.price = price;
                this.description = description;
                this.image = image;
            }
        }

        const postForm = document.getElementById('post-form');
        const productsContainer = document.getElementById('products-container');

        postForm.addEventListener('submit', (e) => {
            e.preventDefault();

            const title = document.getElementById('title').value;
            const price = document.getElementById('price').value;
            const description = document.getElementById('description').value;
            const image = document.getElementById('image').value;

            const newProduct = new Product(title, price, description, image);

            // Add product to Firebase
            const productsRef = ref(db, 'products');
            push(productsRef, newProduct);
        });

        function displayProduct(id, product) {
            const productCard = document.createElement('div');
            productCard.classList.add('product-card');
            productCard.setAttribute('data-id', id);

            productCard.innerHTML = `
                <h2>${product.title}</h2>
                <p>${product.price}</p>
                <p>${product.description}</p>
                <img src="${product.image}" alt="${product.title}">
                <button class="update">Update</button>
                <button class="delete">Delete</button>
            `;

            productsContainer.appendChild(productCard);

            // Add event listeners to buttons
            productCard.querySelector('.update').addEventListener('click', () => updateProduct(id, product));
            productCard.querySelector('.delete').addEventListener('click', () => deleteProduct(id));
        }

        function updateProduct(id, product) {
            const updatedTitle = prompt('Enter new title', product.title);
            const updatedPrice = prompt('Enter new price', product.price);
            const updatedDescription = prompt('Enter new description', product.description);
            const updatedImage = prompt('Enter new image URL', product.image);

            const productRef = ref(db, 'products/' + id);
            update(productRef, {
                title: updatedTitle,
                price: updatedPrice,
                description: updatedDescription,
                image: updatedImage
            });
        }

        function deleteProduct(id) {
            const productRef = ref(db, 'products/' + id);
            remove(productRef);
            document.querySelector(`[data-id="${id}"]`).remove();
        }

        // Fetch and display products from Firebase
        const productsRef = ref(db, 'products');
        onChildAdded(productsRef, (snapshot) => {
            displayProduct(snapshot.key, snapshot.val());
        });
        </script>
</body>
</html>
